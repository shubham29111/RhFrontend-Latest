<div class="section-padding">
  <div class="rh-container">
    <div class="filter-bar justify-center">
      <div class="sort-by w-48 rounded-2xl text-sm font-medium text-gray-900 bg-white dark:bg-gray-700 dark:text-white">
        <label class="ml-2 pt-2 pl-2 mb-0 font-semibold text-gray-900 dark:text-white group-title">Sort by</label>
        <div class="relative flex items-center justify-between p-2.5 ">
          <button id="sort-button"
            class="block text-xs appearance-none w-full bg-white border border-gray-300 text-gray-700 py-2 pr-8 rounded leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            (click)="toggleDropdown()">
            <span class="truncate">{{ selectedOption }}</span>
            <span class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
              <svg class="h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                fill="currentColor">
                <path fill-rule="evenodd"
                  d="M5.292 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 011.414 1.414l-4 4a 1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd" />
              </svg>
            </span>
          </button>
          <ul id="sort-options"
            class="absolute left-0 mt-1 w-full bg-white border border-gray-300 rounded shadow-lg z-10"
            [ngClass]="{ 'hidden': !dropdownOpen }">
            <li class="px-1 py-1 text-xs text-gray-700 hover:bg-gray-100 cursor-pointer" *ngFor="let option of options"
              (click)="selectOption(option)">
              {{ option }}
            </li>
          </ul>
        </div>
      </div>


      <div class="mt-2" *ngFor="let group of filters">
        <ul class="w-48 rounded-2xl text-sm font-medium text-gray-900 bg-white dark:bg-gray-700 dark:text-white">
          <p class="ml-2 pt-2 pl-2 font-semibold text-gray-900 dark:text-white group-title">{{ group.groupName }}</p>
          <div *ngIf="group.subGroups; else noSubGroups">
            <div *ngFor="let subGroup of group.subGroups">
              <p class="ml-2 pt-2 pl-2 font-semibold text-gray-900 dark:text-white sub-group-title">{{
                subGroup.subGroupName }}</p>
              <li *ngFor="let tech of subGroup.technologies" class="dark:bg-gray-600">
                <div class="flex items-center justify-between">
                  <div class="flex items-start">
                    <input [id]="tech.id" type="checkbox" value=""
                      class="custom-checkbox ml-2 mt-2 mb-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                    <label [for]="tech.id"
                      class="ml-2 mt-2 text-xs space-x-0.5 tracking-tight font-smaller text-gray-900 dark:text-gray-300"
                      style="word-spacing: -2px;">{{ tech.name }}
                    </label>

                  </div>
                  <div class="mr-4 flex items-center">
                    <span class="zen-filter-checkbox-count ml-2">{{ tech.count }}</span>
                  </div>
                </div>
              </li>
            </div>
          </div>
          <ng-template #noSubGroups>
            <li *ngFor="let tech of group.technologies" class="dark:bg-gray-600">
              <div class="flex items-center justify-between">
                <div class="flex items-start">
                  <input [id]="tech.id" type="checkbox" value=""
                    class="custom-checkbox ml-2 mt-2 mb-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                  <label [for]="tech.id"
                    class="ml-2 mt-2 text-xs space-x-0.5 tracking-tight font-smaller text-gray-900 dark:text-gray-300"
                    style="word-spacing: -2px;">{{ tech.name }}
                  </label>

                </div>
                <div class="mr-4 flex items-center">
                  <span class="zen-filter-checkbox-count ml-2 text-xs">{{ tech.count }}</span>
                </div>
              </div>
            </li>
          </ng-template>
        </ul>
      </div>
    </div>
    <div class="main-hotel-listing bg-gray-200 h-auto" id="hotelListing">

      <div *ngIf="isLoading">
        <div class="bg-gray-200 w-full animate-pulse h-14 rounded-2xl"></div>
        <div *ngFor="let loader of loaders"
          class="bg-white m-2 p-4 sm:h-64 rounded-2xl shadow-lg flex flex-col sm:flex-row gap-5 select-none ">
          <div class="h-52 sm:h-full sm:w-72 rounded-xl bg-gray-200 animate-pulse">
          </div>
          <div class="flex flex-col flex-1 gap-5 sm:p-2">
            <div class="flex flex-1 flex-col gap-3">
              <div class="bg-gray-200 w-full animate-pulse h-14 rounded-2xl"></div>
              <div class="bg-gray-200 w-full animate-pulse h-3 rounded-2xl"></div>
              <div class="bg-gray-200 w-full animate-pulse h-3 rounded-2xl"></div>
              <div class="bg-gray-200 w-full animate-pulse h-3 rounded-2xl"></div>
              <div class="bg-gray-200 w-full animate-pulse h-3 rounded-2xl"></div>
            </div>
            <div class="mt-auto flex gap-3">
              <div class="bg-gray-200 w-20 h-8 animate-pulse rounded-full"></div>
              <div class="bg-gray-200 w-20 h-8 animate-pulse rounded-full"></div>
              <div class="bg-gray-200 w-20 h-8 animate-pulse rounded-full ml-auto"></div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="!isLoading ">
        <div class="bg-gray-200 w-full h-14 rounded-2xl"></div>
        <div *ngFor="let hotel of hotels" class="bg-white m-2 p-4 sm:h-64 rounded-2xl shadow-lg flex flex-col sm:flex-row gap-5 select-none">
          <div class="h-52 sm:h-full sm:w-72 rounded-xl bg-gray-200 relative overflow-hidden">
            <div *ngFor="let image of hotel.images; let i = index"
                 [ngStyle]="{'background-image': 'url(' + image + ')'}"
                 class="absolute top-0 left-0 h-full w-full rounded-xl bg-cover bg-center transition-opacity duration-700"
                 [class.hidden]="i !== hotel.currentImageIndex"></div>
            <button (click)="prevImage(hotel.id)" 
                    class="absolute left-2 bottom-2 bg-white text-gray-800 p-2 h-8 w-8 rounded-full flex items-center justify-center shadow-lg">
              &lt;
            </button>
            <button (click)="nextImage(hotel.id)" 
                    class="absolute right-2 bottom-2 bg-white text-gray-800 p-2 h-8 w-8 rounded-full flex items-center justify-center shadow-lg">
              &gt;
            </button>
            <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-2 py-1 rounded-full text-xs">
              {{ hotel.currentImageIndex + 1 }} / {{ hotel.images.length }}
            </div>
          </div>
          
          <div class="flex flex-col flex-1 gap-5 sm:p-2" style="position: relative;top: -7%; color: yellow;">
            <div class="flex flex-1 flex-col gap-3">
              <div class="pb-2">
              <div class="flex text-xs">
                <ng-container *ngFor="let star of [1, 2, 3, 4, 5]; let i = index">
                  <i class="fa" [ngClass]="{'fa-star': i < hotel.star_rating, 'fa-star-o': i >= hotel.star_rating}" aria-hidden="true"></i>
                </ng-container>
              </div>

              <div class="w-auto h-14 pb-2 rounded-2xl">
                <h5 class="mb-2 text-xl font-bold" [ngStyle]="{'color': '#1b9bd0'}">{{hotel.name}}</h5>
                <span class="group relative">
                  <div class="absolute bottom-[calc(100%+0.5rem)] left-[50%] -translate-x-[50%] hidden group-hover:block w-auto">
                    <div class="bottom-full right-0 rounded bg-gray-200 px-4 py-1 text-xs text-blue-600 whitespace-nowrap">
                      {{hotel.address}}
                      <svg class="absolute left-0 top-full h-2 w-full text-black" x="0px" y="0px" viewBox="0 0 255 255" xml:space="preserve">
                        <polygon class="fill-current" points="0,0 127.5,127.5 255,0"></polygon>
                      </svg>
                    </div>
                  </div>
                  <p class="mb-4 w-36 text-xs text-gray-500 rh-address">
                    {{hotel.address}}
                  </p>
                </span>
              </div>
              <p class="mb-1 w-36 text-xs text-gray-500 rh-address">
                {{hotel.km_distance}} from center of city
              </p>
            </div>
              
              <div class="w-full h-3 rounded-2xl flex items-center">
                <ng-container *ngIf="hotel.serp_names && hotel.serp_names.length">
                  <ng-container *ngFor="let amenity of hotel.serp_names">
                    <span class="group relative">
                      <div class="absolute bottom-[calc(100%+0.5rem)] left-[50%] -translate-x-[50%] hidden group-hover:block w-auto">
                        <div class="bottom-full right-0 rounded bg-gray-200 px-4 py-1 text-xs text-blue-600 whitespace-wrap">
                          {{formatAmenity(amenity)}}
                          <svg class="absolute left-0 top-full h-2 w-full text-black" x="0px" y="0px" viewBox="0 0 255 255" xml:space="preserve">
                            <polygon class="fill-current" points="0,0 127.5,127.5 255,0"></polygon>
                          </svg>
                        </div>
                      </div>
                      <i [class]="'fa ' + getAmenityIcon(amenity) + ' amenity-icon'"></i>
                    </span>
                  </ng-container>
                </ng-container>
              </div>
              <div class="bg-gray-200 w-full h-3 rounded-2xl"></div>
              <div class="bg-gray-200 w-full h-3 rounded-2xl"></div>
              <div class="mt-auto flex gap-3">
                <div class="bg-gray-200 w-20 h-8 rounded-full"></div>
                <div class="bg-gray-200 w-20 h-8 rounded-full"></div>
                <div class=" w-20 h-8 rounded-full ml-auto">
                  <button class="rgb-button text-white font-bold text-xs py-2 px-1 rounded-full shadow-lg transform transition-transform duration-300 hover:scale-110">
                    Show Details
                  </button>
                </div>
              </div>
            </div>
           
          </div>
        </div>
      </div>
    </div>
    <div class="map-overlay" id="mapOverlay" (click)="toggleMap()">
      <div class="relative w-full h-full">
        <iframe class="absolute top-0 left-0 w-full h-full"
          src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d12080.73732861526!2d-74.0059418!3d40.7127847!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zM40zMDA2JzEwLjAiTiA3NMKwMjUnMzcuNyJX!5e0!3m2!1sen!2sus!4v1648482801994!5m2!1sen!2sus"
          frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0">
        </iframe>
        <div class="overlay"></div>

      </div>
    </div>
  
</div>